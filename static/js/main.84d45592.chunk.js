(this.webpackJsonpkalimba=this.webpackJsonpkalimba||[]).push([[0],{23:function(e,t,i){},29:function(e,t,i){},30:function(e,t,i){"use strict";i.r(t);var n=i(0),a=i(2),o=i.n(a),s=i(14),r=i.n(s),c=i(5),l=i(6),u=i(8),h=i(7),d=(i(23),i(15)),b=i.n(d),m=i(9),j=i(4),p=i(10),v=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(e){var a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{top:0,right:0,bottom:0,left:0},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];Object(c.a)(this,i),(a=t.call(this,e)).onResize=function(){},a.increaseRows=function(){var e=a.state,t=e.rowSpan,i=e.rowlimit,n=e.margin,o=e.canResizeRows,s=a.props.viewSize.outerHeight;if(o&&!(t>=i)){var r=t+1,c=s*r;a.setState({rowSpan:r,viewHeight:c,height:c-n.top-n.bottom},a.onResize)}},a.decreaseRows=function(){var e=a.state,t=e.rowSpan,i=e.margin,n=e.canResizeRows,o=a.props.viewSize.outerHeight;if(n&&!(t<=1)){var s=t-1,r=o*s;a.setState({rowSpan:s,viewHeight:r,height:r-i.top-i.bottom},a.onResize)}},a.increaseColumns=function(){var e=a.state,t=e.columnSpan,i=e.columnLimit,n=e.margin,o=e.canResizeColumns,s=a.props.viewSize.outerWidth;if(o&&!(t>=i)){var r=t+1,c=s*r;a.setState({columnSpan:r,viewWidth:c,width:c-n.left-n.right},a.onResize)}},a.decreaseColumns=function(){var e=a.state,t=e.columnSpan,i=e.margin,n=e.canResizeColumns,o=a.props.viewSize.outerWidth;if(n&&!(t<=1)){var s=t-1,r=o*s;a.setState({columnSpan:s,viewWidth:r,width:r-i.left-i.right},a.onResize)}},a.close=function(){var e=a.props,t=e.toggleView,i=e.name;t&&i&&t(i)},a.getSizeControlHTML=function(){return Object(n.jsxs)("div",{className:"sizeControl",children:[a.state.canResizeRows&&Object(n.jsxs)("span",{children:[Object(n.jsx)("button",{onClick:a.increaseRows,title:"Increase rows",disabled:a.state.rowSpan>=a.state.rowlimit,children:Object(n.jsx)(j.a,{icon:p.b})}),Object(n.jsx)("button",{onClick:a.decreaseRows,title:"Decrease rows",disabled:a.state.rowSpan<=1,children:Object(n.jsx)(j.a,{icon:p.d})})]}),a.state.canResizeColumns&&Object(n.jsxs)("span",{children:[Object(n.jsx)("button",{onClick:a.increaseColumns,title:"Increase columns",disabled:a.state.columnSpan>=a.state.columnLimit,children:Object(n.jsx)(j.a,{icon:p.a})}),Object(n.jsx)("button",{onClick:a.decreaseColumns,title:"Decrease columns",disabled:a.state.columnSpan<=1,children:Object(n.jsx)(j.a,{icon:p.c})})]}),Object(n.jsx)("button",{onClick:a.close,title:"Close",children:Object(n.jsx)(j.a,{icon:p.e})})]})};var h=e.viewSize,d=h.outerWidth,b=h.outerHeight,m=d*r,v=b*s;return a.state={rowSpan:s,columnSpan:r,canResizeRows:l,canResizeColumns:u,rowlimit:12,columnLimit:2,outerWidth:d,outerHeight:b,viewHeight:v,viewWidth:m,margin:o,width:d*r-o.left-o.right,height:b*s-o.top-o.bottom},a}return Object(l.a)(i,[{key:"resizeComponent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props.viewSize,i=t.outerWidth,n=t.outerHeight,a=this.state,o=a.outerWidth,s=a.outerHeight,r=a.margin,c=a.rowSpan,l=a.columnSpan;if(o!==i||s!==n){var u=i*l,h=n*c;this.setState(Object(m.a)(Object(m.a)({},e),{},{outerWidth:i,outerHeight:n,viewWidth:u,viewHeight:h,width:i*l-r.left-r.right,height:n*c-r.top-r.bottom}),this.onResize)}}}]),i}(a.PureComponent),g=i(3),f=(i(29),function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(e){var n;Object(c.a)(this,i);return(n=t.call(this,e,{top:35,right:20,bottom:40,left:55})).updateTab=function(){var e=n.state,t=e.midi,i=e.track,a=e.transpose,o=e.useHtml,s=e.letter,r=n.props.midiFileData,c=[];if(t)r.length-1>=i&&(c=r[i],0!==a&&(c=new g.NoteArray(c).transpose(12*a).getNotes()));else{var l=n.textArea.value,u=g.Lamellophone.convertNumbersToLetters(l,n.numberLetterMap);c=g.Lamellophone.convertTabToNotes(u,n.tuning,120)}console.log(c),o?n.tab.innerHTML=g.Lamellophone.convertNotesToHtmlTab(c,n.tuning,s?"letter":"number",.1,g.Utils.noteColorFromPitch):n.tab.innerText=g.Lamellophone.convertNotesToTab(c,n.tuning,s?"letter":"number",.1)},n.state=Object(m.a)(Object(m.a)({},n.state),{},{useHtml:!0,letter:!0,midi:!1,track:0,transpose:0}),n.tuning=g.Lamellophone.lamellophoneTunings.get("Kalimba").get("17 C Major"),n.numberLetterMap=new Map([[1,"C"],[2,"D"],[3,"E"],[4,"F"],[5,"G"],[6,"A"],[7,"B"]]),n}return Object(l.a)(i,[{key:"componentDidUpdate",value:function(){this.updateTab()}},{key:"render",value:function(){var e=this,t=this.state,i=t.viewWidth,a=t.viewHeight,o=t.midi,s=t.transpose,r=t.useHtml,c=t.letter,l=this.props.midiFileData;return Object(n.jsxs)("div",{className:"View KalimbaTab",style:{gridArea:"span ".concat(this.state.rowSpan," / span ").concat(this.state.columnSpan)},children:[Object(n.jsx)("textarea",{ref:function(t){return e.textArea=t},style:{width:i-60,height:a/2},placeholder:"Write or paste a kalimba tab in letter notation here",onChange:this.updateTab}),Object(n.jsxs)("div",{className:"control",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("label",{children:["Input:",Object(n.jsx)("button",{onClick:function(){return e.setState({midi:!o})},children:o?"MIDI":"Text"})]}),o&&Object(n.jsxs)("label",{children:["Track:",Object(n.jsx)("select",{onChange:function(t){return e.setState({track:+t.target.value})},children:l.map((function(e,t){return Object(n.jsxs)("option",{value:t,children:["Track ",t," (",e.length," notes)"]},t)}))})]}),o&&Object(n.jsxs)("label",{children:["Transpose:",Object(n.jsx)("input",{type:"number",defaultValue:s,min:"-4",max:"4",step:"1",onChange:function(t){return e.setState({transpose:+t.target.value})}})]})]}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("label",{children:["Output:",Object(n.jsx)("button",{onClick:function(){return e.setState({useHtml:!r})},children:r?"HTML":"Text"})]}),Object(n.jsxs)("label",{children:["Note symbols:",Object(n.jsx)("button",{onClick:function(){return e.setState({letter:!c})},children:c?"Letter":"Number"})]})]})]}),Object(n.jsx)("div",{className:"tab",ref:function(t){return e.tab=t},style:{width:"100%",height:a/2}})]})}}]),i}(v)),w=i(16),O=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).onResize=function(){n.setState({viewSize:{outerWidth:Math.floor(window.innerWidth-20),outerHeight:Math.floor(window.innerHeight-200)}})},n.setTimeSelection=function(e){n.setState({timeSelection:e,similarSections:[]})},n.state={viewSize:{outerWidth:800,outerHeight:600},midiFileData:[],timeSelection:null},n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize,!1),this.onResize();var e=document.getElementById("filereader"),t=this;b.a.parse(e,(function(e){try{var i=Object(g.preprocessMidiFileData)(e).parts.map((function(e){return e.noteObjs}));t.setState({midiFileData:i})}catch(n){alert("Invalid MIDI file or wrong format!")}}))}},{key:"render",value:function(){var e=this.state;return Object(n.jsxs)("div",{className:"App dark",children:[Object(n.jsx)("div",{className:"fileSelection",children:Object(n.jsx)("input",{className:"fileInput",type:"file",id:"filereader"})}),Object(n.jsx)(f,{viewSize:e.viewSize,midiFileData:e.midiFileData}),Object(n.jsx)("div",{className:"githubLink",children:Object(n.jsxs)("a",{href:"https://github.com/fheyen/midi-pianoroll",children:[Object(n.jsx)(j.a,{icon:w.a}),"\xa0 https://github.com/fheyen/midi-pianoroll"]})})]})}}]),i}(a.Component);r.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(O,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.84d45592.chunk.js.map